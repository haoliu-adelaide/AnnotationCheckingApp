<!DOCTYPE html>
<html lang="en">
    {% load static %}

<head>
    <link rel="stylesheet" type="text/css" href="{% static 'images/style.css' %}">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        .btn-xl {
    padding: 40px 120px;
    font-size: 20px;
    border-radius: 5px;
    width:100%;  }
    .btn-previous {
    padding: 40px 50px;
    font-size: 20px;
    border-radius: 5px;
    width:100%;  }
    .style-pn {
    padding: 50px 70px;
    font-size: 40px;
    border-radius: 5px;
    width:100%;}
    .btn-label {
    padding: 20px 50px;
    font-size: 34px;
    border-radius: 5px;
    width:60%;  }
    .cb-lg{
      padding: 45px 45px;
      width:45px; 
      height:45px;
    }


        </style>
</head>
<body class="m-5">
    <div class="container">
    <div class="row" style="height: 90vh;">
        
            <div class="col justify-content-center align-content-center">
                

                <div>
                    <div>
                        
                    <img style="max-height: 30%; min-width: 65%; margin: auto;    
                    display: block;" class="img-fluid" alt="Responsive image" 
                    src="{{img.img.url}}">
                    </div>
                    
                    <nav aria-label="Page navigation example" style="margin: auto;    
                    display: block;">
                        <ul class="pagination" style="margin: auto;">
                          <li class="page-item">
                              <a class="page-link" href="{% url 'image' previous.id %}">
                              <img src="https://i.ibb.co/5GqcGdB/previous.png" style="width: 150px;" alt="previous" border="0">
                            </a>
                        </li>
                          <li class="page-item style-pn"><a>{{current_count}} / {{count}}</a></li>
                          <li class="page-item"><a class="page-link" href="{% url 'image' next.id %}"><img style="width: 150px;" src="https://i.ibb.co/RS9XRDm/next.png" alt="next" border="0"></a></li>
                        </ul>
                      </nav>
                    
                      <p class="text-center">Current Label: {{img.category.name}}</p>

                    

                      <div class="row">
                          <div class="col align-self-start">
                            <a class="page-link text-center" href="{% url 'image' FIRST.id %}">Go to first</a>

                          </div>
                          <div class="col algin-self-end">
                            <a class="page-link text-center" href="{% url 'image' LAST.id %}">Go to last</a>

                          </div>
                      </div>




                



                      
                    
                </div>

                
            </div>
        
        <div class="col">
            <!-- <div class="card my-2">
                <div class="card-header">
                  Categories
                </div>
                <ul class="list-group list-group-flush">
                    <form method="POST" action="" enctype="multipart/form-data">
                        <input name="nextpage" value="{{ request.path }}" hidden>
                        {% csrf_token %}

                    {% for category in categories %}
                    <li class="list-group-item" >
                        {% if img.category.name == category.name %}
                        <a href="{% url 'editlabel' category.id %}" class="btn btn-primary btn-label">{{category.name}}</a>
                        <input type="text" name="{{category.pk}}" value="{{category.name}}" placeholder={{category.name}} hidden>
                        <button name="{{category.name}}" type="submit" class="btn btn-dark btn-label btn-block m-1">Choose</button>
                        {% else %}
                        <a href="{% url 'editlabel' category.id %}" class="btn btn-secondary btn-label" >{{category.name}}</a>
                        <input type="text" name={{category.pk}} value={{category.name}} placeholder={{category.name}} hidden>
                        <button name={{category.name}} type="submit" class="btn btn-dark btn-label btn-block m-1">Choose</button>
                        {% endif %}
                    </li>
                    {% empty %}
                    {% endfor %}
                    
    

                  
                  <a href="{% url 'addlabel' %}" class="btn btn-dark btn-sm btn-block m-1">- Remove Annotation</a>
                  
                  

                </ul>
                
              </div>
            </div> -->

              <div class="card my-2">
                <div class="card-header">
                  Categories
                </div>
                <ul class="list-group list-group-flush">
                    <form method="POST" action="" enctype="multipart/form-data">
                        <input name="nextpage" value="{{ request.path }}" hidden>
                        {% csrf_token %}

                    {% for category in categories %}
                    <li class="list-group-item" >
                        {% if img.category.name == category.name %}
                        <div class="row">
                          <div class="col align-self-start">
                            <input type="text" name="{{category.pk}}" value="{{category.name}}" placeholder={{category.name}} hidden>
                            
                            <button name={{category.name}} type="submit" class="btn btn-success btn-label">{{category.name}}</button>
                      
                          </div>
                          <div class="col align-self-end">
                            <input class="form-check-input cb-lg" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
                          </div>
                        </div>
                        {% else %}
                        <div class="row">
                          <div class="col align-self-start">
                            <input type="text" name="{{category.pk}}" value="{{category.name}}" placeholder={{category.name}} hidden>
                            <button name={{category.name}} type="submit" class="btn btn-secondary btn-label">{{category.name}}</button>
                          </div>
                          <div class="col align-self-end">
                            <input class="form-check-input cb-lg" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
                          </div>
                        </div>
                          {% endif %}
                      
                    
                    </li>
                    {% empty %}
                    {% endfor %}
                    
    

                  
                  <a href="{% url 'removeannotation' img.id %}" class="btn btn-dark btn-lg btn-block m-1">- Remove Annotation</a>
                  
                  

                </ul>
                
              </div>
              
                
                    

                    <div class="form-group m-3">
                        <label>Input new label:</label>
                        <input name="category_new" type="text" placeholder="New label"class="form-control-file">
                        <button type='submit' name="textEdit" class="btn btn-dark m-3">+ Add</button>
                </div>
                    
                </form>
                <a href="{% url 'gallery' %}" class="btn btn-dark my-3">Back to home page</a>
                <button class="btn btn-dark my-3" onclick="history.back()">Back to previous page</button>
                <div class="row">
                    {% for file in files %}
                    <div class="col-md-4">
                        <div class="card my-2">
                            <a href="{{file.xml_file_name.url}}" class="btn btn-dark active" role="button" data-bs-toggle="button" aria-pressed="true">Download XML file by right-click and save</a>


            
                            

                        
                        </div>
                    </div>
                    {% empty %}
                    <h3>No XML file</h3>
                    {% endfor %}

        


          


                </div>
        </div>
        <div class="w-100"></div>
        <div class="col">       </div>
        <div class="col">       </div>
    </div>
</div>
    
</body>
</html>